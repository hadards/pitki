<div class="container">
  <div class="card">
    <h2 class="card-title">Manage Categories</h2>

    <div *ngIf="error" class="error-alert">
      {{error}}
    </div>

    <div class="input-group">
      <input
        type="text"
        [(ngModel)]="newCategoryName"
        (keyup.enter)="addCategory()"
        placeholder="Enter new category name"
        class="input"
      />
      <button (click)="addCategory()" [disabled]="loading || !newCategoryName.trim()"
              class="btn-primary">
        Add Category
      </button>
    </div>

    <div class="category-list">
      <div *ngFor="let category of categories" class="category-item">
        <span class="category-name">{{category.name}}</span>
        <button (click)="deleteCategory(category)" class="btn-delete">
          Delete
        </button>
      </div>

      <div *ngIf="categories.length === 0" class="empty-state">
        No categories yet. Use /start in your Telegram bot to create default categories.
      </div>
    </div>
  </div>

  <div class="card">
    <h2 class="card-title">Statistics</h2>

    <div *ngIf="stats" class="stats-grid">
      <div class="stat-card">
        <div class="stat-value">{{stats.total_articles}}</div>
        <div class="stat-label">Total Articles</div>
      </div>

      <div class="stat-card-secondary">
        <div class="stat-card-title">Articles by Category</div>
        <div class="stat-list">
          <div *ngFor="let item of stats.by_category" class="stat-item">
            <span class="stat-item-label">{{item.category}}</span>
            <span class="stat-item-value">{{item.count}}</span>
          </div>
          <div *ngIf="stats.by_category.length === 0" class="stat-empty">
            No articles saved yet
          </div>
        </div>
      </div>

      <div class="stat-card-secondary">
        <div class="stat-card-title">Articles by Source</div>
        <div class="stat-list">
          <div *ngFor="let item of stats.by_source" class="stat-item">
            <span class="stat-item-label">{{item.source}}</span>
            <span class="stat-item-value">{{item.count}}</span>
          </div>
          <div *ngIf="stats.by_source.length === 0" class="stat-empty">
            No articles saved yet
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="!stats" class="loading">
      <div class="spinner"></div>
      <p class="loading-text">Loading statistics...</p>
    </div>
  </div>
</div>
